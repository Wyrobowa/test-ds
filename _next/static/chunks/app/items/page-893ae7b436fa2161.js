(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{3511:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a=e=>String(e).charAt(0).toUpperCase()+String(e).slice(1)},4727:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var a=i(5155),r=i(9749),n=i(8223);function s(e){let t,i,s,c,u,p,m,y,h,f,x,_,g,j,b=(0,r.c)(58),{form:v,setForm:w,itemTypes:E,statuses:C,priorities:S}=e;if(b[0]!==v||b[1]!==E||b[2]!==S||b[3]!==w||b[4]!==C){let e,r,g,j,z,T,k=E.map(o),$=C.map(d),P=S.map(l);i=n.az,y="flex",h="column",f=4,b[17]!==v||b[18]!==w?(e=e=>w({...v,name:e.target.value}),b[17]=v,b[18]=w,b[19]=e):e=b[19],b[20]!==v.name||b[21]!==e?(x=(0,a.jsx)(n.pd,{label:"Title",placeholder:"Enter title",value:v.name,onChange:e,required:!0}),b[20]=v.name,b[21]=e,b[22]=x):x=b[22],b[23]!==v||b[24]!==w?(r=e=>w({...v,type_id:""===e.target.value?"":Number(e.target.value)}),b[23]=v,b[24]=w,b[25]=r):r=b[25],b[26]===Symbol.for("react.memo_cache_sentinel")?(g={value:"",label:"--- Select type ---"},b[26]=g):g=b[26];let N=[g,...k];b[27]!==v.type_id||b[28]!==r||b[29]!==N?(_=(0,a.jsx)(n.l6,{label:"Type",value:v.type_id,onChange:r,options:N,required:!0}),b[27]=v.type_id,b[28]=r,b[29]=N,b[30]=_):_=b[30],b[31]!==v||b[32]!==w?(j=e=>w({...v,status_id:""===e.target.value?"":Number(e.target.value)}),b[31]=v,b[32]=w,b[33]=j):j=b[33],b[34]===Symbol.for("react.memo_cache_sentinel")?(z={value:"",label:"--- Select status ---"},b[34]=z):z=b[34];let Y=[z,...$];b[35]!==v.status_id||b[36]!==j||b[37]!==Y?(c=(0,a.jsx)(n.l6,{label:"Status",value:v.status_id,onChange:j,options:Y,required:!0}),b[35]=v.status_id,b[36]=j,b[37]=Y,b[38]=c):c=b[38],t=n.l6,s="Priority",u=v.priority_id,b[39]!==v||b[40]!==w?(p=e=>w({...v,priority_id:""===e.target.value?"":Number(e.target.value)}),b[39]=v,b[40]=w,b[41]=p):p=b[41],b[42]===Symbol.for("react.memo_cache_sentinel")?(T={value:"",label:"--- Select priority ---"},b[42]=T):T=b[42],m=[T,...P],b[0]=v,b[1]=E,b[2]=S,b[3]=w,b[4]=C,b[5]=t,b[6]=i,b[7]=s,b[8]=c,b[9]=u,b[10]=p,b[11]=m,b[12]=y,b[13]=h,b[14]=f,b[15]=x,b[16]=_}else t=b[5],i=b[6],s=b[7],c=b[8],u=b[9],p=b[10],m=b[11],y=b[12],h=b[13],f=b[14],x=b[15],_=b[16];return b[43]!==t||b[44]!==s||b[45]!==u||b[46]!==p||b[47]!==m?(g=(0,a.jsx)(t,{label:s,value:u,onChange:p,options:m,required:!0}),b[43]=t,b[44]=s,b[45]=u,b[46]=p,b[47]=m,b[48]=g):g=b[48],b[49]!==i||b[50]!==c||b[51]!==g||b[52]!==y||b[53]!==h||b[54]!==f||b[55]!==x||b[56]!==_?(j=(0,a.jsxs)(i,{display:y,flexDirection:h,gap:f,children:[x,_,c,g]}),b[49]=i,b[50]=c,b[51]=g,b[52]=y,b[53]=h,b[54]=f,b[55]=x,b[56]=_,b[57]=j):j=b[57],j}function l(e){return{value:e.id,label:e.name}}function d(e){return{value:e.id,label:e.name}}function o(e){return{value:e.id,label:e.name}}var c=i(9378),u=i(3511);function p(e){let t,i,s,l,d=(0,r.c)(18),{items:o,editingItem:p,isLoading:m,onEdit:y,onDelete:h}=e;if(m&&0===o.length){let e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(n.az,{display:"flex",justifyContent:"center",padding:12,children:(0,a.jsx)(n.aH,{size:"lg"})}),d[0]=e):e=d[0],e}d[1]!==p?.id?(t=e=>p?.id===e,d[1]=p?.id,d[2]=t):t=d[2];let f=t,x=m?.7:1,_=m?"none":"auto";if(d[3]!==x||d[4]!==_?(i={opacity:x,pointerEvents:_},d[3]=x,d[4]=_,d[5]=i):i=d[5],d[6]!==f||d[7]!==o||d[8]!==h||d[9]!==y){let e;d[11]!==f||d[12]!==h||d[13]!==y?(e=e=>(0,a.jsxs)(n.Zp,{bordered:!0,shadow:f(e.id)?"md":"sm",borderColor:f(e.id)?"main":"subtle",children:[(0,a.jsx)(n.aR,{title:e.name}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)(n.az,{display:"flex",flexDirection:"column",gap:4,children:[(0,a.jsxs)(n.az,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(n.EY,{variant:"body-sm",color:"subtle",children:"Type"}),(0,a.jsx)(n.EY,{variant:"body-md",weight:"medium",children:(0,u.Z)(e.type||"")})]}),(0,a.jsxs)(n.az,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(n.EY,{variant:"body-sm",color:"subtle",children:"Status"}),(0,a.jsx)(n.Ex,{intent:(0,c.w)(e.status),variant:"subtle",children:(0,u.Z)(e.status)})]}),(0,a.jsxs)(n.az,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(n.EY,{variant:"body-sm",color:"subtle",children:"Priority"}),(0,a.jsx)(n.Ex,{intent:"high"===e.priority?"danger":"medium"===e.priority?"warning":"info",variant:"subtle",children:(0,u.Z)(e.priority||"medium")})]}),(0,a.jsxs)(n.az,{display:"flex",gap:2,paddingTop:4,children:[(0,a.jsx)(n.az,{flexGrow:1,children:(0,a.jsx)(n.$n,{size:"sm",variant:"outline",intent:"neutral",fullWidth:!0,onClick:()=>y(e),children:"Edit"})}),(0,a.jsx)(n.az,{flexGrow:1,children:(0,a.jsx)(n.$n,{size:"sm",variant:"outline",intent:"danger",fullWidth:!0,onClick:()=>h(e.id),children:"Delete"})})]})]})})]},e.id),d[11]=f,d[12]=h,d[13]=y,d[14]=e):e=d[14],s=o.map(e),d[6]=f,d[7]=o,d[8]=h,d[9]=y,d[10]=s}else s=d[10];return d[15]!==i||d[16]!==s?(l=(0,a.jsx)(n.az,{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:6,style:i,children:s}),d[15]=i,d[16]=s,d[17]=l):l=d[17],l}var m=i(2115),y=i(9406);function h(){let e,t,i,l,d,o,c,u,h,f,x=(0,r.c)(35),{itemTypes:_,statuses:g,priorities:j,items:b,isLoading:v,editingItem:w,form:E,setForm:C,handleAddItem:S,handleEditItem:z,handleCancelEdit:T,handleDeleteItem:k,startEdit:$}=function(){let[e,t]=(0,m.useState)([]),[i,a]=(0,m.useState)([]),[r,n]=(0,m.useState)([]),[s,l]=(0,m.useState)([]),[d,o]=(0,m.useState)(!1),[c,u]=(0,m.useState)(null),p={name:"",type_id:"",status_id:1,priority_id:1},[h,f]=(0,m.useState)(p),x=async()=>{o(!0);try{l(await (0,y.Vg)("/api/items"))}catch(e){console.error(e)}finally{o(!1)}},_=async()=>{o(!0);try{await (0,y.$P)("/api/items",{name:h.name.trim(),type_id:""===h.type_id?null:h.type_id,status_id:""===h.status_id?null:h.status_id,priority_id:""===h.priority_id?null:h.priority_id}),await x(),f(p)}catch(e){alert(e instanceof Error?e.message:"Failed to add item")}finally{o(!1)}},g=async()=>{if(c){o(!0);try{await (0,y.$Y)("/api/items",{id:c.id,name:h.name.trim(),type_id:""===h.type_id?null:h.type_id,status_id:""===h.status_id?null:h.status_id,priority_id:""===h.priority_id?null:h.priority_id}),await x(),u(null),f(p)}catch(e){alert(e instanceof Error?e.message:"Failed to update item")}finally{o(!1)}}},j=async e=>{if(confirm("Are you sure you want to delete this item?")){o(!0);try{await (0,y.Al)(`/api/items?id=${e}`),await x()}catch(e){alert(e instanceof Error?e.message:"Failed to remove item")}finally{o(!1)}}};return(0,m.useEffect)(()=>{(async()=>{o(!0);try{let[e,i,r,s]=await Promise.all([(0,y.Vg)("/api/item-types"),(0,y.Vg)("/api/statuses"),(0,y.Vg)("/api/priorities"),(0,y.Vg)("/api/items")]);t(e),a(i),n(r),l(s)}catch(e){console.error(e)}finally{o(!1)}})()},[]),{itemTypes:e,statuses:i,priorities:r,items:s,isLoading:d,editingItem:c,form:h,setForm:f,handleAddItem:_,handleEditItem:g,handleCancelEdit:()=>{u(null),f(p)},handleDeleteItem:j,startEdit:e=>{u(e),f({name:e.name,type_id:e.type_id||"",status_id:e.status_id||"",priority_id:e.priority_id||""})}}}();x[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(n.az,{display:"flex",flexDirection:"column",gap:2,paddingBottom:8,children:[(0,a.jsx)(n.EY,{variant:"h1",weight:"bold",children:"Tasks list"}),(0,a.jsx)(n.EY,{variant:"body-md",color:"subtle",children:"TO-DO like list"})]}),x[0]=e):e=x[0];let P=w?"Edit item":"Add new item";x[1]!==P?(t=(0,a.jsx)(n.aR,{title:P}),x[1]=P,x[2]=t):t=x[2],x[3]!==E||x[4]!==_||x[5]!==j||x[6]!==C||x[7]!==g?(i=(0,a.jsx)(s,{form:E,setForm:C,itemTypes:_,statuses:g,priorities:j}),x[3]=E,x[4]=_,x[5]=j,x[6]=C,x[7]=g,x[8]=i):i=x[8];let N=w?z:S,Y=v?"Processing...":w?"Update":"Create";return x[9]!==v||x[10]!==N||x[11]!==Y?(l=(0,a.jsx)(n.$n,{variant:"solid",intent:"info",fullWidth:!0,onClick:N,disabled:v,children:Y}),x[9]=v,x[10]=N,x[11]=Y,x[12]=l):l=x[12],x[13]!==w||x[14]!==T||x[15]!==v?(d=w&&(0,a.jsx)(n.$n,{variant:"outline",intent:"neutral",onClick:T,disabled:v,children:"Cancel"}),x[13]=w,x[14]=T,x[15]=v,x[16]=d):d=x[16],x[17]!==l||x[18]!==d?(o=(0,a.jsxs)(n.az,{display:"flex",gap:3,children:[l,d]}),x[17]=l,x[18]=d,x[19]=o):o=x[19],x[20]!==i||x[21]!==o?(c=(0,a.jsx)(n.Wu,{children:(0,a.jsxs)(n.az,{display:"flex",flexDirection:"column",gap:6,children:[i,o]})}),x[20]=i,x[21]=o,x[22]=c):c=x[22],x[23]!==t||x[24]!==c?(u=(0,a.jsx)(n.az,{children:(0,a.jsxs)(n.Zp,{bordered:!0,shadow:"sm",children:[t,c]})}),x[23]=t,x[24]=c,x[25]=u):u=x[25],x[26]!==w||x[27]!==k||x[28]!==v||x[29]!==b||x[30]!==$?(h=(0,a.jsx)(n.az,{children:(0,a.jsx)(p,{items:b,editingItem:w,isLoading:v,onEdit:$,onDelete:k})}),x[26]=w,x[27]=k,x[28]=v,x[29]=b,x[30]=$,x[31]=h):h=x[31],x[32]!==u||x[33]!==h?(f=(0,a.jsxs)(n.az,{paddingY:8,children:[e,(0,a.jsxs)(n.az,{display:"grid",gridTemplateColumns:"350px 1fr",gap:8,children:[u,h]})]}),x[32]=u,x[33]=h,x[34]=f):f=x[34],f}},9378:(e,t,i)=>{"use strict";i.d(t,{w:()=>a});let a=e=>{switch(e){case"active":return"success";case"suspended":return"warning";case"removed":return"danger";default:return"neutral"}}},9406:(e,t,i)=>{"use strict";i.d(t,{$P:()=>s,$Y:()=>d,Al:()=>l,Vg:()=>n});let a=(i(2402).env.NEXT_PUBLIC_API_BASE_URL||"").replace(/\/$/,"");function r(e){return/^https?:\/\//i.test(e)||!a?e:`${a}${e.startsWith("/")?"":"/"}${e}`}async function n(e){let t=await fetch(r(e));if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e?.message||e?.error||"Request failed")}return t.json()}async function s(e,t){let i=await fetch(r(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e?.message||e?.error||"Request failed")}return i.json()}async function l(e){let t=await fetch(r(e),{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e?.message||e?.error||"Request failed")}return 204===t.status?{}:t.json()}async function d(e,t){let i=await fetch(r(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e?.message||e?.error||"Request failed")}return i.json()}},9616:(e,t,i)=>{Promise.resolve().then(i.bind(i,4727))}},e=>{e.O(0,[915,441,826,358],()=>e(e.s=9616)),_N_E=e.O()}]);